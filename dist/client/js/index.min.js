!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Value=function(){function Value(t){this.previousValues=[],this.element=t,this.scriptName=t.getAttribute("name"),this.type=t.getAttribute("type"),this.dataType=t.getAttribute("dataType"),this.keyframeIndicatorDiv=t.children[0].children[0],this.keyframeIndicatorDiv.className.includes("keyframeIndicator")?this.labelDiv=t.children[0].children[1]:(this.keyframeIndicatorDiv=null,this.labelDiv=t.children[0].children[0]),this.label=this.labelDiv.textContent,this.dependencies=[],this.dependants=[],t.getAttribute("dependencies")&&(this.dependencyExpressions=t.getAttribute("dependencies")),this.disabled=!1,this.events={}}return Value.prototype.interactions=function(){var t=this;this.keyframeIndicatorDiv&&(this.keyframeIndicatorDiv.onclick=function(e){e.stopPropagation(),t.events.onkeyframe&&t.events.onkeyframe()})},Value.prototype.activationFunction=function(){if(!(0>=this.dependencies.length)){for(var d,boolFlag=!0,_i=0,_a=this.dependencies;_i<_a.length;_i++){if(d=_a[_i],d.value.disabled)return void this.disableValue(!0);eval("("+d.value.value+d.expression+d.checkVal+")")||(boolFlag=!1)}this.disableValue(!boolFlag);for(var d,_b=0,_c=this.dependants;_b<_c.length;_b++)d=_c[_b],d.activationFunction()}},Value.prototype.disableValue=function(t){this.disabled=t,this.element.className=t?"property disabled":"property"},Value.prototype.textInputFilter=function(t,e){var n,i;return"float"===(i=e||this.dataType)?n=t.match(/-?\d*[\.\,]?\d*/g)[0]:"uFloat"===i?n=t.match(/\d*[\.\,]?\d*/g)[0]:"int"===i?n=t.match(/-?\d*/g)[0]:"uInt"===i?n=t.match(/\d*/g)[0]:console.error("Data Type not defined / found",i),n=n.replace(",","."),isNaN(parseFloat(n))||"-0"==n||n.match(/-?\d+\.0*$/g)?n:parseFloat(n)},Value.prototype.on=function(t,e){this.events["on"+t]=e.bind(this)},Value.prototype.setValue=function(){},Value.prototype.setUI=function(){},Value}();exports.default=Value},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i=n(11),r=function(t){t.on("change",(function(){c[t.scriptName]=t.value,"canvasSize"==t.scriptName&&(l.canvas.width=l.canvas.height=c.canvasSize)}))},o=0,s=new(n(12).default)(document.getElementById("controls")).values;o<s.length;o++)r(s[o]);var a,c={canvasSize:512,fps:12,lineWidth:2},u=0,l=document.querySelector("canvas").getContext("2d");l.canvas.width=l.canvas.height=c.canvasSize,e.default=function(t){u=1,0;var e,n=performance.now(),r=[];!function o(){var s=(e=performance.now())-n;if(s>1e3/c.fps){n=e-s%(1e3/c.fps),l.clearRect(0,0,c.canvasSize,c.canvasSize),l.lineWidth=c.lineWidth;for(var h=1;h<t.pointData[u].length;h++){var p=t.pointData[u][h-1],f=t.pointData[u][h+0];if(64!=p.statusCode&&64!=f.statusCode){var d=(p.x+32768)/65535*c.canvasSize,v=(1-(p.y+32768)/65535)*c.canvasSize,g=(f.x+32768)/65535*c.canvasSize,y=(1-(f.y+32768)/65535)*c.canvasSize,m=void 0,b=void 0,_=void 0;if(p.colorIndex){var w=p.colorIndex%64;m=i.default[w].r,b=i.default[w].g,_=i.default[w].b}else m=p.r,b=p.g,_=p.b;l.beginPath(),l.moveTo(d,v),l.lineTo(g,y),l.strokeStyle="rgb("+m+", "+b+", "+_+")",l.stroke()}}for(++u>=t.pointData.length-1&&(u=0),e=performance.now();0<r.length&&r[0]<=e-990;)r.shift();r.push(e),r.length}a=requestAnimationFrame(o)}()},e.stopDrawingLoop=function(){cancelAnimationFrame(a)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(3)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(1),o=document.getElementById("dropZone");o.onclick=function(){r.stopDrawingLoop();var t=document.createElement("input");t.type="file",t.name="ilda",t.accept=".ild",t.click(),t.onchange=function(){return i.default(t.files[0])}},o.ondrop=function(t){if(r.stopDrawingLoop(),t.preventDefault(),o.style.outlineWidth="1px",t.dataTransfer.items){var e=t.dataTransfer.items[0].getAsFile();i.default(e)}},o.ondragover=function(t){t.preventDefault()},o.ondragenter=function(){o.style.outlineWidth="5px"},o.ondragleave=function(){o.style.outlineWidth="1px"}},function(t,e,n){"use strict";(function(t){function i(e){return new Promise((function(n){var i=new FileReader;i.readAsArrayBuffer(e),i.onload=function(){n(t.from(i.result))}}))}Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),o=n(1);e.default=function(t){i(t).then((function(t){!function(t){return!("ILDA"!==t.slice(0,4).toString())}(t)?console.log("Invalid File Format"):o.default(new r.default(t))}))}}).call(this,n(5).Buffer)},function(t,e,n){"use strict";var i=Math.floor,r=Math.pow,o=Math.min;(function(t){function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,0>n||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=p(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(e,n),r=(t=a(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?a(t,0):p(t,e);if("Buffer"===e.type&&z(e.data))return p(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(0>t)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=a(t,0>e?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=0>e.length?0:0|f(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(i)return M(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var i=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function y(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),0>n&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(0>n){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:m(t,e,n,i,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,i,r){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,c=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=(i+"").toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(2>t.length||2>e.length)return-1;a=2,c/=2,u/=2,n/=2}if(r){var l=-1;for(s=n;s<c;s++)if(o(t,s)!==o(e,-1==l?0:s-l))-1!=l&&(s-=s-l),l=-1;else if(-1==l&&(l=s),s-l+1===u)return l*a}else for(n+u>c&&(n=c-u),s=n;0<=s;s--){for(var h=!0,p=0;p<u;p++)if(o(t,s+p)!==o(e,p)){h=!1;break}if(h)return s}return-1}function b(t,e,n,i){n=+n||0;var r=t.length-n;i?(i=+i)>r&&(i=r):i=r;var o=e.length;if(0!=o%2)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s,a=0;a<i;++a){if(s=parseInt(e.substr(2*a,2),16),isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,i){return j(M(e,t.length-n),t,n,i)}function w(t,e,n,i){return j(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function D(t,e,n,i){return w(t,e,n,i)}function x(t,e,n,i){return j(U(e),t,n,i)}function C(t,e,n,i){return j(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!(0>(e-=2));++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function k(t,e,n){return 0===e&&n===t.length?G.fromByteArray(t):G.fromByteArray(t.slice(e,n))}function A(t,e,n){n=o(t.length,n);for(var i=[],r=e;r<n;){var s,a,c,u,l=t[r],h=null,p=239<l?4:223<l?3:191<l?2:1;if(r+p<=n)1==p?128>l&&(h=l):2==p?128==(192&(s=t[r+1]))&&(127<(u=(31&l)<<6|63&s)&&(h=u)):3==p?(s=t[r+1],a=t[r+2],128==(192&s)&&128==(192&a)&&(2047<(u=(15&l)<<12|(63&s)<<6|63&a)&&(55296>u||57343<u)&&(h=u))):4==p&&(s=t[r+1],a=t[r+2],c=t[r+3],128==(192&s)&&128==(192&a)&&128==(192&c)&&(65535<(u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&c)&&1114112>u&&(h=u)));null===h?(h=65533,p=1):65535<h&&(h-=65536,i.push(55296|1023&h>>>10),h=56320|1023&h),i.push(h),r+=p}return function(t){var e=t.length;if(e<=H)return F.apply(String,t);for(var n="",i=0;i<e;)n+=F.apply(String,t.slice(i,i+=H));return n}(i)}function E(t,e,n){var i="";n=o(t.length,n);for(var r=e;r<n;++r)i+=F(127&t[r]);return i}function P(t,e,n){var i="";n=o(t.length,n);for(var r=e;r<n;++r)i+=F(t[r]);return i}function O(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=V(t[o]);return r}function Y(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=F(i[o]+256*i[o+1]);return r}function S(t,e,n){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function X(t,e,n,i,r,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function I(t,e,n,i){0>e&&(e=65535+e+1);for(var r=0,s=o(t.length-n,2);r<s;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function R(t,e,n,i){0>e&&(e=4294967295+e+1);for(var r=0,s=o(t.length-n,4);r<s;++r)t[n+r]=255&e>>>8*(i?r:3-r)}function B(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function T(t,e,n,i,r){return r||B(t,0,n,4),N.write(t,e,n,i,23,4),n+4}function L(t,e,n,i,r){return r||B(t,0,n,8),N.write(t,e,n,i,52,8),n+8}function V(t){return 16>t?"0"+t.toString(16):t.toString(16)}function M(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],s=0;s<i;++s){if(55295<(n=t.charCodeAt(s))&&57344>n){if(!r){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===i){-1<(e-=3)&&o.push(239,191,189);continue}r=n;continue}if(56320>n){-1<(e-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,128>n){if(0>(e-=1))break;o.push(n)}else if(2048>n){if(0>(e-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(e-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(e-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function U(t){return G.toByteArray(function(t){if(2>(t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(W,"")).length)return"";for(;0!=t.length%4;)t+="=";return t}(t))}function j(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}var F=String.fromCharCode,G=n(7),N=n(8),z=n(9);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0===t.TYPED_ARRAY_SUPPORT?function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}():t.TYPED_ARRAY_SUPPORT,e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,i){return l(e),0>=e?a(t,e):void 0===n?a(t,e):"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n)}(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=o(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?A(this,0,t):v.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,i,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),0>e||n>t.length||0>i||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),u=o(s,a),l=this.slice(i,r),h=t.slice(e,n),p=0;p<u;++p)if(l[p]!==h[p]){s=l[p],a=h[p];break}return s<a?-1:a<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),0<t.length&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return D(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;c.prototype.slice=function(t,e){var n,i=this.length;if(0>(t=~~t)?0>(t+=i)&&(t=0):t>i&&(t=i),0>(e=void 0===e?i:~~e)?0>(e+=i)&&(e=0):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||S(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||S(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUInt8=function(t,e){return e||S(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||S(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||S(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||S(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||S(t,e,this.length);for(var i=this[t],o=1,s=0;++s<e&&(o*=256);)i+=this[t+s]*o;return i>=(o*=128)&&(i-=r(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||S(t,e,this.length);for(var i=e,o=1,s=this[t+--i];0<i&&(o*=256);)s+=this[t+--i]*o;return s>=(o*=128)&&(s-=r(2,8*e)),s},c.prototype.readInt8=function(t,e){return e||S(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||S(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||S(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||S(t,4,this.length),N.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||S(t,4,this.length),N.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||S(t,8,this.length),N.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||S(t,8,this.length),N.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||X(this,t,e,n,r(2,8*n)-1,0);var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=255&t/o;return e+n},c.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||X(this,t,e,n,r(2,8*n)-1,0);var o=n-1,s=1;for(this[e+o]=255&t;0<=--o&&(s*=256);)this[e+o]=255&t/s;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=i(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=r(2,8*n-1);X(this,t,e,n,o-1,-o)}var s=0,a=1,c=0;for(this[e]=255&t;++s<n&&(a*=256);)0>t&&0==c&&0!==this[e+s-1]&&(c=1),this[e+s]=255&(t/a>>0)-c;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=r(2,8*n-1);X(this,t,e,n,o-1,-o)}var s=n-1,a=1,c=0;for(this[e+s]=255&t;0<=--s&&(a*=256);)0>t&&0==c&&0!==this[e+s+1]&&(c=1),this[e+s]=255&(t/a>>0)-c;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=i(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||X(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return T(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return T(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;0<=r;--r)t[r+e]=this[r+n];else if(1e3>o||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);256>r&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=c.isBuffer(t)?t:M(new c(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var W=/[^+\/0-9A-Za-z-_]/g}).call(this,n(6))},function(t){var e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,e){"use strict";function n(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function i(t){return o[63&t>>18]+o[63&t>>12]+o[63&t>>6]+o[63&t]}function r(t,e,n){for(var r,o=[],s=e;s<n;s+=3)r=(16711680&t[s]<<16)+(65280&t[s+1]<<8)+(255&t[s+2]),o.push(i(r));return o.join("")}e.byteLength=function(t){var e=n(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,r=n(t),o=r[0],c=r[1],u=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,c)),l=0,h=0<c?o-4:o;for(i=0;i<h;i+=4)e=s[t.charCodeAt(i)]<<18|s[t.charCodeAt(i+1)]<<12|s[t.charCodeAt(i+2)]<<6|s[t.charCodeAt(i+3)],u[l++]=255&e>>16,u[l++]=255&e>>8,u[l++]=255&e;return 2===c&&(e=s[t.charCodeAt(i)]<<2|s[t.charCodeAt(i+1)]>>4,u[l++]=255&e),1===c&&(e=s[t.charCodeAt(i)]<<10|s[t.charCodeAt(i+1)]<<4|s[t.charCodeAt(i+2)]>>2,u[l++]=255&e>>8,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,s=[],a=16383,c=0,u=n-i;c<u;c+=a)s.push(r(t,c,c+a>u?u:c+a));return 1==i?(e=t[n-1],s.push(o[e>>2]+o[63&e<<4]+"==")):2==i&&(e=(t[n-2]<<8)+t[n-1],s.push(o[e>>10]+o[63&e>>4]+o[63&e<<2]+"=")),s.join("")};for(var o=[],s=[],a="undefined"==typeof Uint8Array?Array:Uint8Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,l=c.length;u<l;++u)o[u]=c[u],s[c.charCodeAt(u)]=u;s[45]=62,s[95]=63},function(t,e){var n=Math.pow;e.read=function(t,e,i,r,o){var s,a,c=8*o-r-1,u=(1<<c)-1,l=u>>1,h=-7,p=i?o-1:0,f=i?-1:1,d=t[e+p];for(p+=f,s=d&(1<<-h)-1,d>>=-h,h+=c;0<h;s=256*s+t[e+p],p+=f,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;0<h;a=256*a+t[e+p],p+=f,h-=8);if(0===s)s=1-l;else{if(s===u)return a?NaN:1/0*(d?-1:1);a+=n(2,r),s-=l}return(d?-1:1)*a*n(2,s-r)},e.write=function(t,e,i,r,o,s){var a,c,u,l=8*s-o-1,h=(1<<l)-1,p=h>>1,f=23===o?5.960464477539062e-8:0,d=r?0:s-1,v=r?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),1>e*(u=n(2,-a))&&(a--,u*=2),2<=(e+=1<=a+p?f/u:f*n(2,1-p))*u&&(a++,u/=2),a+p>=h?(c=0,a=h):1<=a+p?(c=(e*u-1)*n(2,o),a+=p):(c=e*n(2,p-1)*n(2,o),a=0));8<=o;t[i+d]=255&c,d+=v,c/=256,o-=8);for(a=a<<o|c,l+=o;0<l;t[i+d]=255&a,d+=v,a/=256,l-=8);t[i+d-v]|=128*g}},function(t){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={format:{type:"string",range:[0,4]},reserved_1:{type:"uint",range:[4,7]},formatCode:{type:"uint",range:[7,8]},frameName:{type:"string",range:[8,16]},company:{type:"string",range:[16,24]},dataRecords:{type:"uint16",range:[24,26]},frame:{type:"uint16",range:[26,28]},length:{type:"uint16",range:[28,30]},projector:{type:"uint",range:[30,31]},reserved_2:{type:"uint",range:[31,32]}},i={ilda_0:{x:{type:"int16",range:[0,2]},y:{type:"int16",range:[2,4]},z:{type:"int16",range:[4,6]},statusCode:{type:"uint",range:[6,7]},colorIndex:{type:"uint",range:[7,8]}},ilda_1:{x:{type:"int16",range:[0,2]},y:{type:"int16",range:[2,4]},statusCode:{type:"uint",range:[4,5]},colorIndex:{type:"uint",range:[5,6]}},ilda_2:{r:{type:"uint",range:[0,1]},g:{type:"uint",range:[1,2]},b:{type:"uint",range:[2,3]}},ilda_4:{x:{type:"int16",range:[0,2]},y:{type:"int16",range:[2,4]},z:{type:"int16",range:[4,6]},statusCode:{type:"uint",range:[6,7]},b:{type:"uint",range:[7,8]},g:{type:"uint",range:[8,9]},r:{type:"uint",range:[9,10]}},ilda_5:{x:{type:"int16",range:[0,2]},y:{type:"int16",range:[2,4]},statusCode:{type:"uint",range:[4,5]},b:{type:"uint",range:[5,6]},g:{type:"uint",range:[6,7]},r:{type:"uint",range:[7,8]}}},r=function(){function t(t){this.bufferData=t,this.byteOffset=0,this.headerData=[],this.pointData=[],this.readFile()}return t.prototype.readHeaderOnce=function(){for(var t in n){var e=n[t].type,i=n[t].range[0],r=n[t].range[1],o=this.convertBuffer(this.bufferData.slice(i,r),e);console.log(t,o)}},t.prototype.readFile=function(){for(;this.byteOffset<this.bufferData.length;)this.readHeader(),this.readPointData()},t.prototype.readHeader=function(){var t={},e=0;for(var i in n){var r=n[i].type,o=n[i].range[0]+this.byteOffset,s=n[i].range[1]+this.byteOffset,a=this.convertBuffer(this.bufferData.slice(o,s),r);e+=s-o,t[i]=a}this.byteOffset+=e,this.headerData.push(t)},t.prototype.readPointData=function(){if(!(this.byteOffset>=this.bufferData.length)){for(var t=this.headerData[this.headerData.length-1],e=i["ilda_"+t.formatCode],n=[],r=0;r<t.dataRecords;r++){var o={},s=0;for(var a in e){var c=e[a].type,u=e[a].range[0]+this.byteOffset,l=e[a].range[1]+this.byteOffset,h=this.convertBuffer(this.bufferData.slice(u,l),c);s+=l-u,o[a]=h}this.byteOffset+=s,n.push(o)}this.pointData.push(n)}},t.prototype.convertBuffer=function(t,e){var n;switch(e){case"string":n=t.toString();break;case"uint":n=t.readUInt8(0);break;case"int":n=t.readInt8(0);break;case"uint16":n=t.readUInt16BE(0);break;case"int16":n=t.readInt16BE(0);break;default:throw Error('unknown type "'+e+'" in file structure')}return n},t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={0:{r:255,g:0,b:0,name:"Red"},1:{r:255,g:16,b:0},2:{r:255,g:32,b:0},3:{r:255,g:48,b:0},4:{r:255,g:64,b:0},5:{r:255,g:80,b:0},6:{r:255,g:96,b:0},7:{r:255,g:112,b:0},8:{r:255,g:128,b:0},9:{r:255,g:144,b:0},10:{r:255,g:160,b:0},11:{r:255,g:176,b:0},12:{r:255,g:192,b:0},13:{r:255,g:208,b:0},14:{r:255,g:224,b:0},15:{r:255,g:240,b:0},16:{r:255,g:255,b:0,name:"Yellow"},17:{r:224,g:255,b:0},18:{r:192,g:255,b:0},19:{r:160,g:255,b:0},20:{r:128,g:255,b:0},21:{r:96,g:255,b:0},22:{r:64,g:255,b:0},23:{r:32,g:255,b:0},24:{r:0,g:255,b:0,name:"Green"},25:{r:0,g:255,b:36},26:{r:0,g:255,b:73},27:{r:0,g:255,b:109},28:{r:0,g:255,b:146},29:{r:0,g:255,b:182},30:{r:0,g:255,b:219},31:{r:0,g:255,b:255,name:"Cyan"},32:{r:0,g:227,b:255},33:{r:0,g:198,b:255},34:{r:0,g:170,b:255},35:{r:0,g:142,b:255},36:{r:0,g:113,b:255},37:{r:0,g:85,b:255},38:{r:0,g:56,b:255},39:{r:0,g:28,b:255},40:{r:0,g:0,b:255,name:"Blue"},41:{r:32,g:0,b:255},42:{r:64,g:0,b:255},43:{r:96,g:0,b:255},44:{r:128,g:0,b:255},45:{r:160,g:0,b:255},46:{r:192,g:0,b:255},47:{r:224,g:0,b:255},48:{r:255,g:0,b:255,name:"Magenta"},49:{r:255,g:32,b:255},50:{r:255,g:64,b:255},51:{r:255,g:96,b:255},52:{r:255,g:128,b:255},53:{r:255,g:160,b:255},54:{r:255,g:192,b:255},55:{r:255,g:224,b:255},56:{r:255,g:255,b:255,name:"White"},57:{r:255,g:224,b:224},58:{r:255,g:192,b:192},59:{r:255,g:160,b:160},60:{r:255,g:128,b:128},61:{r:255,g:96,b:96},62:{r:255,g:64,b:64},63:{r:255,g:32,b:32}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),r=n(14),o=n(15),s=n(16),a=n(17),c=n(18),u=n(20),l=n(23),h={text:i.default,slider:r.default,range:o.default,checkbox:s.default,toggle:a.default,curve:c.default,gradient:u.default,maskimage:l.default},p=function(){function t(t){var e=this;this.values=[],Array.from(t.getElementsByClassName("property")).forEach((function(t){e.values.push(new(h[t.getAttribute("type")])(t))}));for(var n=0,i=this.values;n<i.length;n++)if("curve"==(s=i[n]).type){var r=s,o=this.find(s.scriptName.replace("Curve",""));r.indicatorYDependency=o,o.dependentCurves.push(r),r=s,o=this.find("lifetime"),r.indicatorXDependency=o,o.dependentCurves.push(r),r.updateIndicators(),r.updateCurrentValue()}for(var s,a=0,c=this.values;a<c.length;a++)if((s=c[a]).dependencyExpressions){for(var u=0,l=s.dependencyExpressions.replace(/\s/g,"").split("&&");u<l.length;u++){var p=l[u],f=p.replace(/([\W\d]|false$|true$)/g,""),d=p.replace(/\w/g,""),v=p.match(/([\d]|false$|true$)/g),g=v&&0<v.length?v[0]:"",y=this.find(f);"!"==d&&(d="==",g="false"),s.dependencies.push({value:y,name:f,expression:d,checkVal:g}),y.dependants.push(s)}s.activationFunction()}}return t.prototype.find=function(t){for(var e,n=0,i=this.values;n<i.length;n++)if((e=i[n]).scriptName==t)return e;console.error('Could not find value with script name "'+t+'"')},t}();e.default=p},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.valueDiv=e.children[0].children[3],n.value=parseFloat(n.valueDiv.value),n.interactions(),n}return i(e,t),e.prototype.interactions=function(){var e=this;t.prototype.interactions.call(this),this.labelDiv.onclick=function(){e.valueDiv.focus(),e.valueDiv.select()},this.valueDiv.oninput=function(){var t=e.textInputFilter(e.valueDiv.value);e.valueDiv.value=t+"","number"==typeof t&&e.valueChange(!0)},this.valueDiv.onblur=function(){e.valueDiv.value=e.value+""}},e.prototype.setUI=function(t){"string"==typeof t&&(this.valueDiv.value=t),"number"==typeof t&&(this.valueDiv.value=Math.round(100*t)/100+""),this.valueChange(!1)},e.prototype.setValue=function(t){this.setUI(t),this.valueChange(!0)},e.prototype.valueChange=function(t){this.previousValues.unshift(this.value),10<this.previousValues.length&&this.previousValues.pop(),this.value=parseFloat(this.valueDiv.value),t&&this.events.onchange&&this.events.onchange();for(var e=0,n=this.dependants;e<n.length;e++)n[e].activationFunction()},e}(n(0).default);e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.sliderDiv=e.children[0].children[3],n.valueDiv=e.children[0].children[5],n.value=parseFloat(n.valueDiv.value),n.interactions(),n}return i(e,t),e.prototype.interactions=function(){var e=this;t.prototype.interactions.call(this),this.labelDiv.onclick=function(){e.valueDiv.focus(),e.valueDiv.select()},this.sliderDiv.oninput=function(){e.valueDiv.value=e.sliderDiv.value,e.valueChange(!0)},this.valueDiv.oninput=function(){var t=e.textInputFilter(e.valueDiv.value);e.valueDiv.value=t+"","number"==typeof t&&(e.valueChange(!0),e.sliderDiv.value=t+"")},this.valueDiv.onblur=function(){e.valueDiv.value=e.value+""}},e.prototype.setUI=function(t){"string"==typeof t&&(this.sliderDiv.value="multiple",this.valueDiv.value="multiple"),"number"==typeof t&&(this.sliderDiv.value=t+"",this.valueDiv.value=Math.round(100*t)/100+""),this.valueChange(!1)},e.prototype.setValue=function(t){this.setUI(t),this.valueChange(!0)},e.prototype.valueChange=function(t){this.previousValues.unshift(this.value),10<this.previousValues.length&&this.previousValues.pop(),this.value=parseFloat(this.valueDiv.value),t&&this.events.onchange&&this.events.onchange();for(var e=0,n=this.dependants;e<n.length;e++)n[e].activationFunction()},e}(n(0).default);e.default=r},function(t,e,n){"use strict";var i=Math.round,r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e){var n=t.call(this,e)||this;return n.suffixDiv=e.children[0].children[6],n.sliderDiv1=e.children[0].children[3],n.valueDiv1=e.children[0].children[5],n.sliderDiv2=e.children[0].children[7],n.valueDiv2=e.children[0].children[9],n.valueRangeDiv=e.children[0].children[11],n.dependentCurves=[],n.value=[parseFloat(n.valueDiv1.value),parseFloat(n.valueDiv2.value)],n.interactions(),n}return r(e,t),e.prototype.interactions=function(){var e=this;t.prototype.interactions.call(this),this.labelDiv.onclick=function(){e.valueDiv1.focus(),e.valueDiv1.select()},this.sliderDiv1.oninput=function(){e.valueDiv1.value=e.sliderDiv1.value;var t=e.value[1]-e.value[0];e.sliderDiv2.value=parseFloat(e.sliderDiv1.value)+t+"",e.valueDiv2.value=parseFloat(e.sliderDiv1.value)+t+"",e.valueChange(!0)},this.valueDiv1.oninput=function(){var t=e.textInputFilter(e.valueDiv1.value);if(e.valueDiv1.value=t+"","number"==typeof t){var n=e.value[1]-e.value[0];e.sliderDiv2.value=t+n+"",e.valueDiv2.value=t+n+"",e.valueChange(!0),e.sliderDiv1.value=t+""}},this.valueDiv1.onblur=function(){e.valueDiv1.value=e.value[0]+""},this.sliderDiv2.oninput=function(){e.valueDiv2.value=e.sliderDiv2.value,e.valueChange(!0)},this.valueDiv2.oninput=function(){var t=e.textInputFilter(e.valueDiv2.value);e.valueDiv2.value=t+"","number"==typeof t&&(e.valueChange(!0),e.sliderDiv2.value=t+"")},this.valueDiv2.onblur=function(){e.valueDiv2.value=e.value[1]+""}},e.prototype.setUI=function(t){if("string"==typeof t&&(this.sliderDiv1.value="multiple",this.valueDiv1.value="multiple",this.sliderDiv2.value="multiple",this.valueDiv2.value="multiple"),"object"==typeof t){var e=t[0],n=t[1];this.sliderDiv1.value=e+"",this.valueDiv1.value=i(100*e)/100+"",this.sliderDiv2.value=n+"",this.valueDiv2.value=i(100*n)/100+""}this.valueChange(!1)},e.prototype.setValue=function(t){this.setUI(t),this.valueChange(!0)},e.prototype.valueChange=function(t){"multiple"!=this.valueDiv1.value&&(this.value=[parseFloat(this.valueDiv1.value),parseFloat(this.valueDiv2.value)]),t&&this.events.onchange&&this.events.onchange();for(var e=0,n=this.dependants;e<n.length;e++)(i=n[e]).activationFunction();for(var i,r=0,s=this.dependentCurves;r<s.length;r++)(i=s[r]).updateIndicators(),i.updateCurrentValue();var a=o(this.value);a.sort((function(t,e){return t-e})),this.valueRangeDiv.textContent="multiple"==this.valueDiv1.value?"multiple "+this.suffixDiv.textContent:a[0]==a[1]?a[0]+" "+this.suffixDiv.textContent:a[0]+" to "+a[1]+" "+this.suffixDiv.textContent},e}(n(0).default);e.default=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.checkboxDiv=e.children[0].children[3].children[0],n.value=!!n.checkboxDiv.checked,n.interactions(),n}return i(e,t),e.prototype.interactions=function(){var e=this;t.prototype.interactions.call(this),this.element.onclick=function(){e.checkboxDiv.checked=!e.checkboxDiv.checked,e.checkboxDiv.indeterminate=!1,e.valueChange(!0)}},e.prototype.setUI=function(t){"string"==typeof t&&(this.checkboxDiv.checked=!1,this.checkboxDiv.indeterminate=!0),"boolean"==typeof t&&(this.checkboxDiv.checked=t,this.checkboxDiv.indeterminate=!1),this.valueChange(!1)},e.prototype.setValue=function(t){this.setUI(t),this.valueChange(!0)},e.prototype.valueChange=function(t){this.previousValues.unshift(this.value),10<this.previousValues.length&&this.previousValues.pop(),this.value=!!this.checkboxDiv.checked,t&&this.events.onchange&&this.events.onchange();for(var e=0,n=this.dependants;e<n.length;e++)n[e].activationFunction()},e}(n(0).default);e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.checkboxDiv=e.children[0].children[3].children[0],n.value=n.checkboxDiv.checked?1:0,n.optionDivs=[e.children[0].children[2],e.children[0].children[4]],n.interactions(),n}return i(e,t),e.prototype.interactions=function(){var e=this;t.prototype.interactions.call(this),this.element.onclick=function(){e.checkboxDiv.indeterminate=!1,e.checkboxDiv.checked=!e.checkboxDiv.checked,e.valueChange(!0)}},e.prototype.setUI=function(t){"string"==typeof t?(this.checkboxDiv.checked=!1,this.checkboxDiv.indeterminate=!0):(this.checkboxDiv.checked=1==t,this.checkboxDiv.indeterminate=!1),this.valueChange(!1)},e.prototype.setValue=function(t){this.setUI(t),this.valueChange(!0)},e.prototype.valueChange=function(t){this.previousValues.unshift(this.value),10<this.previousValues.length&&this.previousValues.pop(),this.value=this.checkboxDiv.checked?1:0,this.value=this.checkboxDiv.indeterminate?-1:this.value;for(var e,n=0;n<this.optionDivs.length;n++)(e=this.optionDivs[n]).className=e.className.includes("left")?"value left":"value",n==this.value&&(e.className+=" active");t&&this.events.onchange&&this.events.onchange();for(var i=0,r=this.dependants;i<r.length;i++)r[i].activationFunction()},e}(n(0).default);e.default=r},function(t,e,n){"use strict";var i=Math.round,r=Math.abs,o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),c=n(19),u=function(t){function e(e){var n=t.call(this,e)||this;return n.curveDiv=e.children[0].children[2],n.curve=new c.default(n.curveDiv),n.value=n.curve,n.currentValueLabelDivX=e.children[0].children[1].children[0],n.currentValueLabelDivY=e.children[0].children[1].children[4],n.currentValueDivX=e.children[0].children[1].children[1],n.currentValueDivY=e.children[0].children[1].children[5],n.indicatorXMin=e.children[0].children[4].children[0],n.indicatorXLabel=e.children[0].children[4].children[1],n.indicatorXMax=e.children[0].children[4].children[2],n.indicatorYMin=e.children[0].children[3].children[2],n.indicatorYLabel=e.children[0].children[3].children[1],n.indicatorYMax=e.children[0].children[3].children[0],n.hardInterpolationBtn=e.children[2].children[0].children[0],n.softInterpolationBtn=e.children[2].children[0].children[1],n.flipXBtn=e.children[2].children[1].children[0],n.flipYBtn=e.children[2].children[1].children[1],n.resetLinearBtn=e.children[2].children[2].children[0],n.resetEaseBtn=e.children[2].children[2].children[1],n.interactions(),n}return o(e,t),e.prototype.interactions=function(){var e=this;t.prototype.interactions.call(this),this.currentValueLabelDivX.onclick=function(){e.currentValueDivX.focus(),e.currentValueDivX.select()},this.currentValueLabelDivY.onclick=function(){e.currentValueDivY.focus(),e.currentValueDivY.select()},this.currentValueDivX.oninput=function(){var t=e.textInputFilter(e.currentValueDivX.value,e.indicatorXDependency.dataType);if(e.currentValueDivX.value=t+"","number"==typeof t){var n=s(e.indicatorXDependency.value),i=s(e.indicatorYDependency.value);n.sort((function(t,e){return t-e})),i.sort((function(t,e){return t-e}));var o=0>n[0]?n[0]:0,a=n[1],c=0>i[0]?i[0]:0,u=i[1],l=r((o-t)/(a-o)),h=r((c-parseFloat(e.currentValueDivY.value))/(u-c));e.curve.setSelectedPoint(l,h)}},this.currentValueDivY.oninput=function(){var t=e.textInputFilter(e.currentValueDivY.value,e.indicatorYDependency.dataType);if(e.currentValueDivY.value=t+"","number"==typeof t){var n=s(e.indicatorXDependency.value),i=s(e.indicatorYDependency.value);n.sort((function(t,e){return t-e})),i.sort((function(t,e){return t-e}));var o=0>n[0]?n[0]:0,a=n[1],c=0>i[0]?i[0]:0,u=i[1],l=r((o-parseFloat(e.currentValueDivX.value))/(a-o)),h=r((c-t)/(u-c));e.curve.setSelectedPoint(l,h)}},this.hardInterpolationBtn.onclick=this.curve.hardInterpolation.bind(this.curve),this.softInterpolationBtn.onclick=this.curve.softInterpolation.bind(this.curve),this.flipXBtn.onclick=this.curve.flipX.bind(this.curve),this.flipYBtn.onclick=this.curve.flipY.bind(this.curve),this.resetLinearBtn.onclick=this.curve.resetLinear.bind(this.curve),this.resetEaseBtn.onclick=this.curve.resetEase.bind(this.curve),this.curve.on("mousemove",(function(){return e.updateCurrentValue()})),this.curve.on("pointselect",(function(){return e.updateCurrentValue()})),this.curve.on("pointdeselect",(function(){return e.updateCurrentValue()})),this.curve.on("pointmove",(function(){return e.valueChange()})),this.curve.on("pointadd",(function(){return e.valueChange()})),this.curve.on("pointdelete",(function(){return e.valueChange()})),this.curve.on("buttonfunction",(function(){return e.valueChange()}))},e.prototype.updateCurrentValue=function(){if("multiple"!=this.indicatorXDependency.valueDiv1.value){var t=s(this.indicatorXDependency.value);t.sort((function(t,e){return t-e}));var e=0>t[0]?t[0]:0,n=t[1];this.currentValueDivX.value=(e+i(this.curve.indicatorX*(n-e)*100)/100).toFixed(2),this.currentValueDivX.nextElementSibling.textContent=this.indicatorXDependency.suffixDiv.textContent}else this.currentValueDivX.value="multiple",this.currentValueDivX.nextElementSibling.textContent=this.indicatorXDependency.suffixDiv.textContent;if("multiple"!=this.indicatorYDependency.valueDiv1.value){var r=s(this.indicatorYDependency.value);r.sort((function(t,e){return t-e}));var o=0>r[0]?r[0]:0,a=r[1];this.currentValueDivY.value=(o+i(this.curve.indicatorY*(a-o)*100)/100).toFixed(2),this.currentValueDivY.nextElementSibling.textContent=this.indicatorYDependency.suffixDiv.textContent}else this.currentValueDivY.value="multiple",this.currentValueDivY.nextElementSibling.textContent=this.indicatorYDependency.suffixDiv.textContent},e.prototype.updateIndicators=function(){var t=s(this.indicatorXDependency.value),e=s(this.indicatorYDependency.value);t.sort((function(t,e){return t-e})),e.sort((function(t,e){return t-e})),t="multiple"==this.indicatorXDependency.valueDiv1.value?["multiple","multiple"]:t,e="multiple"==this.indicatorYDependency.valueDiv1.value?["multiple","multiple"]:e,this.indicatorXMin.textContent="0 "+this.indicatorXDependency.suffixDiv.textContent,this.indicatorXMax.textContent=t[1]+" "+this.indicatorXDependency.suffixDiv.textContent,this.indicatorYMin.textContent="0 "+this.indicatorYDependency.suffixDiv.textContent,this.indicatorYLabel.textContent=this.indicatorYDependency.label,this.indicatorYMax.textContent=e[1]+" "+this.indicatorYDependency.suffixDiv.textContent},e.prototype.setUI=function(t){this.curve.import(t)},e.prototype.setValue=function(t){this.setUI(t),this.valueChange()},e.prototype.valueChange=function(){this.curve.createLUT(),this.events.onchange&&this.events.onchange()},e}(a.default);e.default=u},function(t,e){"use strict";function n(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}var i=Math.round,r=Math.floor,o=Math.pow;Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t){this.noDOM=!0,t&&(this.noDOM=!1,this.canvas=t,this.cw=t.width=600,this.ch=t.height=300,this.ctx=t.getContext("2d")),this.points=[],this.noDOM||(this.addPoint(0,0),this.addPoint(1,1),this.mouseX=0,this.mouseY=0,this.indicatorX=0,this.indicatorY=0,this.events={}),this.lutResolution=1e3,this.noDOM||(this.interactions(),this.draw())}return t.prototype.hardInterpolation=function(){for(var t=!1,e=0,n=this.points;e<n.length;e++)(i=n[e]).selected&&(i.cp1X=i.x,i.cp1Y=i.y,i.cp2X=i.x,i.cp2Y=i.y,t=!0);if(!t)for(var i,r=0,o=this.points;r<o.length;r++)(i=o[r]).cp1X=i.x,i.cp1Y=i.y,i.cp2X=i.x,i.cp2Y=i.y;this.draw(),this.createLUT(),this.events.onbuttonfunction&&this.events.onbuttonfunction()},t.prototype.softInterpolation=function(){for(var t=!1,e=0,n=this.points;e<n.length;e++)(i=n[e]).selected&&(i.cp1X=i.x-.25,i.cp1Y=i.y,i.cp2X=i.x+.25,i.cp2Y=i.y,t=!0);if(!t)for(var i,r=0,o=this.points;r<o.length;r++)(i=o[r]).cp1X=i.x-.25,i.cp1Y=i.y,i.cp2X=i.x+.25,i.cp2Y=i.y;this.draw(),this.createLUT(),this.events.onbuttonfunction&&this.events.onbuttonfunction()},t.prototype.flipX=function(){for(var t=0,e=this.points;t<e.length;t++){var n=e[t],i=n.cp1X-n.x,r=n.cp1Y-n.y,o=n.cp2X-n.x,s=n.cp2Y-n.y;n.x=1-n.x,n.cp1X=n.x-o,n.cp1Y=n.y+s,n.cp2X=n.x-i,n.cp2Y=n.y+r}this.points.sort((function(t,e){return t.x-e.x})),this.draw(),this.createLUT(),this.events.onbuttonfunction&&this.events.onbuttonfunction()},t.prototype.flipY=function(){for(var t=0,e=this.points;t<e.length;t++){var n=e[t],i=n.cp1X-n.x,r=n.cp1Y-n.y,o=n.cp2X-n.x,s=n.cp2Y-n.y;n.y=1-n.y,n.cp1X=n.x+i,n.cp1Y=n.y-r,n.cp2X=n.x+o,n.cp2Y=n.y-s}this.draw(),this.createLUT(),this.events.onbuttonfunction&&this.events.onbuttonfunction()},t.prototype.resetLinear=function(){this.points=[],this.addPoint(0,0),this.addPoint(1,1),this.hardInterpolation()},t.prototype.resetEase=function(){this.points=[],this.addPoint(0,0),this.addPoint(1,1),this.softInterpolation()},t.prototype.getY=function(t){for(var e=1/this.lutResolution,n=0,r=this.lookupX.length-1,o=i((n+r)/2),s=t,a=this.lookupX[o],c=0;Math.abs(s-a)>e&&(c++,a>s?r=o:a<s&&(n=o),o=i((n+r)/2),a=this.lookupX[o],!(100<c)););return this.lookupY[o]},t.prototype.createLUT=function(){this.lookupX=[],this.lookupY=[];for(var t=1;t<this.points.length;t++){for(var e=this.points[t-1],n=this.points[t],i=n.x-e.x,r=0;1>r;r+=1/(this.lutResolution*i)){var s=o(1-r,3)*e.x+3*o(1-r,2)*r*e.cp2X+3*(1-r)*o(r,2)*n.cp1X+o(r,3)*n.x,a=o(1-r,3)*e.y+3*o(1-r,2)*r*e.cp2Y+3*(1-r)*o(r,2)*n.cp1Y+o(r,3)*n.y;this.lookupX.push(s),this.lookupY.push(a)}if(t==this.points.length-1){s=0*e.x+0*e.cp2X+0*n.cp1X+1*n.x,a=0*e.y+0*e.cp2Y+0*n.cp1Y+1*n.y;this.lookupX.push(s),this.lookupY.push(a)}}},t.prototype.on=function(t,e){this.events["on"+t]=e.bind(this)},t.prototype.interactions=function(){var t=this;window.addEventListener("tabChange",(function(){0<t.canvas.clientWidth&&(t.canvas.width=t.cw=t.canvas.clientWidth,t.canvas.height=t.ch=t.canvas.clientWidth/2,t.draw())})),window.addEventListener("resizeUI",(function(){0<t.canvas.clientWidth&&(t.canvas.width=t.cw=t.canvas.clientWidth,t.canvas.height=t.ch=t.canvas.clientWidth/2,t.draw())})),this.canvas.addEventListener("mousemove",(function(e){var i=n(e.offsetX,0,t.cw-1),o=-1*n(e.offsetY,0,t.ch-1)+r(t.ch)-1;t.mouseX=i/(r(t.cw)-1),t.mouseY=o/(r(t.ch)-1);for(var s=0,a=t.points;s<a.length;s++){var c=(y=a[s]).x*(t.cw-1),u=y.y*(t.ch-1),l=y.cp1X*(t.cw-1),h=y.cp1Y*(t.ch-1),p=y.cp2X*(t.cw-1),f=y.cp2Y*(t.ch-1);if(y.hover=!1,y.hoverCp1=!1,y.hoverCp2=!1,100>=(i-c)*(i-c)+(o-u)*(o-u)){y.hover=!0;break}if(y.selected){if(100>=(i-l)*(i-l)+(o-h)*(o-h)){y.hoverCp1=!0;break}if(100>=(i-p)*(i-p)+(o-f)*(o-f)){y.hoverCp2=!0;break}}}for(var d=!1,v=0,g=t.points;v<g.length;v++)(y=g[v]).selected&&(d=!0);d||(t.indicatorX=t.mouseX,t.indicatorY=t.mouseY);for(var y,m=0,b=t.points;m<b.length;m++){if(((y=b[m]).movable||y.movableCp1||y.movableCp2)&&e.altKey){var _=r((t.mouseX+.025)/.05),w=r((t.mouseY+.05)/.1);t.mouseX=.05*_,t.mouseY=.1*w}if(y.movable){var D=y.cp1X-y.x,x=y.cp1Y-y.y,C=y.cp2X-y.x,k=y.cp2Y-y.y;y.x=t.mouseX,y.y=t.mouseY,y.cp1X=y.x+D,y.cp1Y=y.y+x,y.cp2X=y.x+C,y.cp2Y=y.y+k,t.indicatorX=t.mouseX,t.indicatorY=t.mouseY,t.createLUT(),t.events.onpointmove&&t.events.onpointmove()}if(y.movableCp1){y.cp1X=t.mouseX,y.cp1Y=t.mouseY;D=y.cp1X-y.x,x=y.cp1Y-y.y;e.shiftKey||(y.cp2X=y.x-D,y.cp2Y=y.y-x),t.createLUT(),t.events.onpointmove&&t.events.onpointmove()}if(y.movableCp2){y.cp2X=t.mouseX,y.cp2Y=t.mouseY;C=y.cp2X-y.x,k=y.cp2Y-y.y;e.shiftKey||(y.cp1X=y.x-C,y.cp1Y=y.y-k),t.createLUT(),t.events.onpointmove&&t.events.onpointmove()}}t.points.sort((function(t,e){return t.x-e.x})),t.draw(),t.events.onmousemove&&t.events.onmousemove()})),this.canvas.addEventListener("mousedown",(function(e){for(var n,i=!1,r=0,o=t.points;r<o.length;r++)(n=o[r]).hover||n.hoverCp1||n.hoverCp2||(n.selected=!1),n.hover&&(n.selected=!0,n.movable=!0,t.indicatorX=n.x,t.indicatorY=n.y,t.events.onpointselect&&t.events.onpointselect()),n.hoverCp1&&(n.movableCp1=!0),n.hoverCp2&&(n.movableCp2=!0),n.selected&&(i=!0);if(!i){if(t.indicatorX=t.mouseX,t.indicatorY=t.mouseY,e.ctrlKey){var s=t.addPoint(t.mouseX,t.mouseY);t.points[s].hover=!0,t.points[s].selected=!0,t.points[s].movable=!0,t.createLUT(),t.events.onpointadd&&t.events.onpointadd()}t.events.onpointdeselect&&t.events.onpointdeselect()}t.draw()})),this.canvas.addEventListener("mouseup",(function(){for(var e,n=0,i=t.points;n<i.length;n++)(e=i[n]).movable=!1,e.movableCp1=!1,e.movableCp2=!1})),this.canvas.addEventListener("mouseleave",(function(){for(var e,n=0,i=t.points;n<i.length;n++)(e=i[n]).movable=!1,e.movableCp1=!1,e.movableCp2=!1})),this.canvas.addEventListener("contextmenu",(function(e){if(e.preventDefault(),!(1>=t.points.length)){for(var n,i=0,r=t.points;i<r.length;i++)(n=r[i]).selected&&t.points.splice(t.points.indexOf(n),1);t.points.sort((function(t,e){return t.x-e.x})),t.draw(),t.createLUT(),t.events.onpointdelete&&t.events.onpointdelete()}}))},t.prototype.import=function(t){this.points=[];for(var e=0,n=t;e<n.length;e++){var i=n[e],r=this.addPoint(i.x,i.y);i.cp1X&&(this.points[r].cp1X=i.cp1X),i.cp1Y&&(this.points[r].cp1Y=i.cp1Y),i.cp2X&&(this.points[r].cp2X=i.cp2X),i.cp2Y&&(this.points[r].cp2Y=i.cp2Y)}this.createLUT(),this.noDOM||this.draw()},t.prototype.export=function(){for(var t,e=[],n=0,i=this.points;n<i.length;n++)t=i[n],e.push({x:t.x,y:t.y,cp1X:t.cp1X,cp1Y:t.cp1Y,cp2X:t.cp2X,cp2Y:t.cp2Y});return e},t.prototype.addPoint=function(t,e){this.points.push({x:t,y:e,cp1X:t-.25,cp1Y:e,cp2X:t+.25,cp2Y:e,hover:!1,hoverCp1:!1,hoverCp2:!1,selected:!1,movable:!1,movableCp1:!1,movableCp2:!1}),this.points.sort((function(t,e){return t.x-e.x}));for(var n,i=0,r=this.points;i<r.length;i++)if(t==(n=r[i]).x&&e==n.y)return this.points.indexOf(n)},t.prototype.setSelectedPoint=function(t,e){for(var n,i=0,r=this.points;i<r.length;i++)if((n=r[i]).selected){var o=n.cp1X-n.x,s=n.cp1Y-n.y,a=n.cp2X-n.x,c=n.cp2Y-n.y;n.x=t,n.y=e,n.cp1X=n.x+o,n.cp1Y=n.y+s,n.cp2X=n.x+a,n.cp2Y=n.y+c,this.indicatorX=t,this.indicatorY=e}this.points.sort((function(t,e){return t.x-e.x})),this.draw(),this.createLUT(),this.events.onpointmove&&this.events.onpointmove()},t.prototype.draw=function(){this.ctx.clearRect(0,0,this.cw,this.ch),this.drawGrid(),this.drawCurve(),this.drawPoints()},t.prototype.drawGrid=function(){this.ctx.strokeStyle="#666666",this.ctx.lineWidth=.25;for(var t=1;20>t;t++)this.ctx.beginPath(),this.ctx.moveTo(this.cw/20*t-.5,0),this.ctx.lineTo(this.cw/20*t-.5,this.ch),this.ctx.stroke();for(t=1;10>t;t++)this.ctx.beginPath(),this.ctx.moveTo(0,this.ch/10*t-.5),this.ctx.lineTo(this.cw,this.ch/10*t-.5),this.ctx.stroke()},t.prototype.drawCurve=function(){this.ctx.strokeStyle="#CCCCCC",this.ctx.lineWidth=1.5,this.ctx.beginPath(),this.ctx.moveTo(0,(1-this.points[0].y)*this.ch),this.ctx.lineTo(this.points[0].x*this.cw,(1-this.points[0].y)*this.ch);for(var t=1;t<this.points.length;t++){var e=this.points[t].x*this.cw,n=(1-this.points[t].y)*this.ch,i=this.points[t].cp1X*this.cw,r=(1-this.points[t].cp1Y)*this.ch,o=this.points[t-1].cp2X*this.cw,s=(1-this.points[t-1].cp2Y)*this.ch;this.ctx.bezierCurveTo(o,s,i,r,e,n)}this.ctx.lineTo(this.cw,(1-this.points[this.points.length-1].y)*this.ch),this.ctx.stroke()},t.prototype.drawPoints=function(){for(var t=Math.PI,e=0,n=this.points;e<n.length;e++){var i=n[e],r=i.x*this.cw,o=(1-i.y)*this.ch,s=i.cp1X*this.cw,a=(1-i.cp1Y)*this.ch,c=i.cp2X*this.cw,u=(1-i.cp2Y)*this.ch;i.selected&&(this.ctx.lineWidth=.5,this.ctx.beginPath(),this.ctx.moveTo(r,o),this.ctx.lineTo(s,a),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(r,o),this.ctx.lineTo(c,u),this.ctx.stroke()),this.ctx.fillStyle="#33AAFF",i.hover&&(this.ctx.fillStyle="#66CCFF"),this.ctx.beginPath(),this.ctx.arc(r,o,4,0,2*t,!1),this.ctx.closePath(),this.ctx.fill(),i.selected&&(this.ctx.fillStyle="#33AAFF",(i.hover||i.hoverCp1)&&(this.ctx.fillStyle="#66CCFF"),this.ctx.beginPath(),this.ctx.arc(s,a,3,0,2*t,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#33AAFF",(i.hover||i.hoverCp2)&&(this.ctx.fillStyle="#66CCFF"),this.ctx.beginPath(),this.ctx.arc(c,u,3,0,2*t,!1),this.ctx.closePath(),this.ctx.fill())}},t}();e.default=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(21),s=function(t){function e(e){var n=t.call(this,e)||this;if(n.extendable="true"==n.element.getAttribute("extendable"),n.value=[],n.gradientGroups=[],n.extendable){n.addGradientButton=e.children[0].children[2];var i=e.children[0].children[4],r=new o.default(i);n.gradientGroups.push({gradient:r,gradientDiv:i,gradientContainer:e.children[0],currentValueLabelDiv:e.children[0].children[3].children[0],currentValueDiv:e.children[0].children[3].children[1]}),n.value.push(r)}else{i=e.children[0].children[3],r=new o.default(i);n.gradientGroups.push({gradient:r,gradientDiv:i,gradientContainer:e.children[0],currentValueLabelDiv:e.children[0].children[2].children[0],currentValueDiv:e.children[0].children[2].children[1]}),n.value.push(r)}return n.interactions(),n}return i(e,t),e.prototype.interactions=function(){var e=this;t.prototype.interactions.call(this),this.extendable&&(this.addGradientButton.onclick=this.addGradientDiv.bind(this,!0)),this.gradientGroups[0].currentValueLabelDiv.onmousedown=function(t){t.stopPropagation()},this.gradientGroups[0].currentValueLabelDiv.onclick=function(){e.gradientGroups[0].currentValueDiv.focus(),e.gradientGroups[0].currentValueDiv.select()},this.gradientGroups[0].currentValueDiv.oninput=function(){var t=e.textInputFilter(e.gradientGroups[0].currentValueDiv.value,"uFloat");e.gradientGroups[0].currentValueDiv.value=t+"","number"==typeof t&&e.gradientGroups[0].gradient.setSelectedKnot(t/100)},this.gradientGroups[0].gradient.on("mousemove",(function(){return e.updateCurrentValue(e.gradientGroups[0].currentValueDiv,e.gradientGroups[0].gradient)})),this.gradientGroups[0].gradient.on("knotdeselect",(function(){return e.updateCurrentValue(e.gradientGroups[0].currentValueDiv,e.gradientGroups[0].gradient)})),this.gradientGroups[0].gradient.on("knotmove",(function(){return e.valueChange()})),this.gradientGroups[0].gradient.on("knotadd",(function(){return e.valueChange()})),this.gradientGroups[0].gradient.on("knotdelete",(function(){return e.valueChange()})),this.gradientGroups[0].gradient.on("colorchange",(function(){return e.valueChange()}))},e.prototype.updateCurrentValue=function(t,e){t.value=(Math.round(1e4*e.indicatorX)/100).toFixed(2)},e.prototype.addGradientDiv=function(t){var e=this,n=document.createElement("div");n.className="fillGradient";var i=document.createElement("div");i.className="seperator";var r=document.createElement("div");r.className="gradient";var s=document.createElement("div");s.className="currentValue";var a=document.createElement("div");a.className="label small",a.textContent="Knot Position",a.onmousedown=function(t){t.stopPropagation()},a.onclick=function(){c.focus(),c.select()};var c=document.createElement("input");c.type="text",c.value="0",c.className="value",c.oninput=function(){var t=e.textInputFilter(c.value,"uFloat");c.value=t+"","number"==typeof t&&h.setSelectedKnot(t/100)};var u=document.createElement("div");u.className="suffix",u.textContent="%";var l=document.createElement("div");l.className="removeColor",l.onclick=function(){e.element.removeChild(r.parentElement.previousElementSibling),e.element.removeChild(r.parentElement);var t=e.gradientGroups.indexOf(p);e.value.splice(t,1),e.gradientGroups.splice(t,1),e.valueChange()},s.appendChild(a),s.appendChild(c),s.appendChild(u),s.appendChild(l),n.appendChild(s),n.appendChild(r),this.element.appendChild(i),this.element.appendChild(n);var h=new o.default(r);h.on("mousemove",(function(){return e.updateCurrentValue(c,h)})),h.on("knotselect",(function(){return e.updateCurrentValue(c,h)})),h.on("knotdeselect",(function(){return e.updateCurrentValue(c,h)})),h.on("knotmove",(function(){return e.valueChange()})),h.on("knotadd",(function(){return e.valueChange()})),h.on("knotdelete",(function(){return e.valueChange()})),h.on("colorchange",(function(){return e.valueChange()}));var p={gradient:h,gradientDiv:r,gradientContainer:n,removeGradientButton:l,currentValueLabelDiv:a,currentValueDiv:c};this.gradientGroups.push(p),this.value.push(h),t&&this.valueChange()},e.prototype.setUI=function(t){var e=this.gradientGroups[0].gradientDiv.style.background;this.gradientGroups[0].gradientDiv.style.backgroundColor="",this.gradientGroups[0].gradientDiv.style.backgroundImage="",this.gradientGroups[0].gradientDiv.style.backgroundSize="",this.gradientGroups[0].gradientDiv.style.backgroundPosition="";for(var n=this.gradientGroups.length-1;1<=n;n--)this.element.removeChild(this.gradientGroups[n].gradientDiv.parentElement.previousElementSibling),this.element.removeChild(this.gradientGroups[n].gradientDiv.parentElement),this.value.splice(n,1),this.gradientGroups.splice(n,1);if("string"!=typeof t)for(n=0;n<t.length;n++){1<=n&&this.addGradientDiv(!1),this.gradientGroups[n].gradient.import(t[n])}if("string"==typeof t){this.gradientGroups[0].gradientDiv.style.backgroundColor=e,this.gradientGroups[0].gradientDiv.style.backgroundImage="linear-gradient(45deg, #222 25%, transparent 25%, transparent 75%, #222 75%, #222), linear-gradient(45deg, #222 25%, transparent 25%, transparent 75%, #222 75%, #222",this.gradientGroups[0].gradientDiv.style.backgroundSize="10px 10px",this.gradientGroups[0].gradientDiv.style.backgroundPosition="0 0, 5px 5px";for(var i,r=0,o=this.gradientGroups[0].gradient.knots;r<o.length;r++)(i=o[r]).div.parentElement.removeChild(i.div),this.gradientGroups[0].gradient.knots.splice(this.gradientGroups[0].gradient.knots.indexOf(i),1)}},e.prototype.setValue=function(t){this.setUI(t),this.valueChange()},e.prototype.valueChange=function(){this.events.onchange&&this.events.onchange()},e}(r.default);e.default=s},function(t,e,n){"use strict";function i(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t){this.noDOM=!0,t&&(this.noDOM=!1,r=n(22),this.gradientDiv=t),this.knots=[],this.noDOM||(this.addKnot(0),this.mouseX=0,this.indicatorX=0,this.events={},this.interactions())}return t.prototype.export=function(){for(var t,e=[],n=0,i=this.knots;n<i.length;n++)t=i[n],e.push({position:t.position,color:t.color});return e},t.prototype.import=function(t){if(this.knots=[],this.noDOM)for(var e=0,n=t;e<n.length;e++){var i;i=(o=n[e]).color?o.color:[51,170,255];var r={position:o.position,color:i,hover:!1,selected:!1,movable:!1};this.knots.push(r)}else{this.gradientDiv.innerHTML="";for(var o,s=0,a=t;s<a.length;s++)o=a[s],this.addKnot(o.position,o.color)}this.knots.sort((function(t,e){return t.position-e.position}))},t.prototype.getColor=function(t){var e=[];if(1==this.knots.length)e=this.knots[0].color;else if(t<=this.knots[0].position)e=this.knots[0].color;else if(t>=this.knots[this.knots.length-1].position)e=this.knots[this.knots.length-1].color;else for(var n=1;n<this.knots.length;n++){var i=this.knots[n-1],r=this.knots[n];if(t>i.position&&t<r.position){var o=(t-i.position)/(r.position-i.position);e[0]+=(r.color[0]-i.color[0])*o,e[1]+=(r.color[1]-i.color[1])*o,e[2]+=(r.color[2]-i.color[2])*o}}return e},t.prototype.addKnot=function(t,e){var n,i=this;n=e||(0>=this.knots.length?[51,170,255]:this.getColor(t));var o=document.createElement("div");o.className="knot",o.style.left=100*t+"%",o.onmouseenter=function(){c.hover=!0},o.onmouseleave=function(){c.hover=!1},o.oncontextmenu=function(t){if(t.preventDefault(),!(1>=i.knots.length)){for(var e,n=0,r=i.knots;n<r.length;n++)(e=r[n]).selected&&(e.div.parentElement.removeChild(e.div),i.knots.splice(i.knots.indexOf(e),1));i.calculateGradient(),i.events.onknotdelete&&i.events.onknotdelete()}};var s=document.createElement("div");s.className="el1",s.style.borderBottomColor="rgb("+n[0]+", "+n[1]+", "+n[2]+")";var a=document.createElement("div");a.className="el2",a.style.backgroundColor="rgb("+n[0]+", "+n[1]+", "+n[2]+")",o.appendChild(s),o.appendChild(a),this.gradientDiv.appendChild(o);var c={position:t,color:n,hover:!1,selected:!1,movable:!1,div:o};return o.ondblclick=function(){var t=r.create({el:o,useAsButton:!0,closeOnScroll:!1,lockOpacity:!0,default:"rgb("+c.color[0]+", "+c.color[1]+", "+c.color[2]+")",position:"top-end",theme:"nano",appClass:"pickerCustomize",components:{preview:!1,opacity:!1,hue:!0,interaction:{hex:!0,rgba:!0,hsla:!1,hsva:!0,cmyk:!1,input:!0,clear:!1,save:!1}}});requestAnimationFrame((function(){return t.show()})),t.on("hide",(function(){setTimeout((function(){t.destroyAndRemove()}),500)})),t.on("change",(function(t){var e=t.toRGBA();s.style.borderBottomColor=e.toString(),a.style.backgroundColor=e.toString(),c.color=[e[0],e[1],e[2]],i.calculateGradient(),i.events.oncolorchange&&i.events.oncolorchange()}))},this.knots.push(c),this.knots.sort((function(t,e){return t.position-e.position})),this.calculateGradient(),this.knots.indexOf(c)},t.prototype.calculateGradient=function(){var t;if(1<this.knots.length){t="linear-gradient(to right";for(var e,n=0,i=this.knots;n<i.length;n++)t+=", rgb("+(e=i[n]).color[0]+", "+e.color[1]+", "+e.color[2]+") "+100*e.position+"%";t+=")",this.gradientDiv.style.background=t}else t="rgb("+this.knots[0].color[0]+", "+this.knots[0].color[1]+", "+this.knots[0].color[2]+")",this.gradientDiv.style.background=t},t.prototype.on=function(t,e){this.events["on"+t]=e.bind(this)},t.prototype.setSelectedKnot=function(t){for(var e,n=0,i=this.knots;n<i.length;n++)(e=i[n]).selected&&(e.position=t,e.div.style.left=100*t+"%",this.indicatorX=t,this.events.onknotmove&&this.events.onknotmove());this.knots.sort((function(t,e){return t.position-e.position}))},t.prototype.interactions=function(){var t=this,e=0,n=0;this.gradientDiv.addEventListener("mousemove",(function(e){t.mouseX=i((e.clientX-t.gradientDiv.getBoundingClientRect().left)/(t.gradientDiv.clientWidth-1),0,1);for(var n=!1,r=0,o=t.knots;r<o.length;r++)o[r].selected&&(n=!0);n||(t.indicatorX=t.mouseX),t.events.onmousemove&&t.events.onmousemove()})),this.gradientDiv.addEventListener("mousedown",(function(e){for(var n=!1,i=0,r=t.knots;i<r.length;i++)r[i].selected&&(n=!0);!n&&e.ctrlKey&&(t.addKnot(t.mouseX),t.events.onknotadd&&t.events.onknotadd())})),this.gradientDiv.parentElement.addEventListener("mousemove",(function(r){for(var o,s=0,a=t.knots;s<a.length;s++)if((o=a[s]).movable){var c=(r.clientX-e)/t.gradientDiv.clientWidth;o.position=i(n+c,0,1),o.div.style.left=100*o.position+"%",t.indicatorX=o.position,t.calculateGradient(),t.events.onknotmove&&t.events.onknotmove()}t.knots.sort((function(t,e){return t.position-e.position}))})),this.gradientDiv.parentElement.addEventListener("mousedown",(function(i){for(var r,o=!1,s=0,a=t.knots;s<a.length;s++)(r=a[s]).hover||(r.selected=!1,r.div.className="knot"),r.hover&&(r.selected=!0,r.movable=!0,r.div.className+=" selected",t.indicatorX=r.position,e=i.clientX,n=r.position,t.events.onknotselect&&t.events.onknotselect()),r.selected&&(o=!0);o||(t.indicatorX=t.mouseX,t.events.onknotdeselect&&t.events.onknotdeselect())})),this.gradientDiv.parentElement.addEventListener("mouseup",(function(){for(var e=0,n=t.knots;e<n.length;e++)n[e].movable=!1})),this.gradientDiv.parentElement.addEventListener("mouseleave",(function(){for(var e=0,n=t.knots;e<n.length;e++)n[e].movable=!1}))},t}();e.default=o},function(t){window,t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e,n=1;n<arguments.length;n++)e=null==arguments[n]?{}:arguments[n],n%2?i(e,!0).forEach((function(n){o(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n,i,o={}){e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);for(const s of e)for(const e of n)s[t](e,i,r({capture:!1},o));return Array.prototype.slice.call(arguments,1)}function a(t){const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild}function c(t,e){const n=t.getAttribute(e);return t.removeAttribute(e),n}function u(t){return function t(e,n={}){const i=c(e,":obj"),r=c(e,":ref"),o=i?n[i]={}:n;r&&(n[r]=e);for(const n of Array.from(e.children)){const e=c(n,":arr"),i=t(n,e?{}:o);e&&(o[e]||(o[e]=[])).push(Object.keys(i).length?i:n)}return n}(a(t))}function l(t){let e=t.path||t.composedPath&&t.composedPath();if(e)return e;let n=t.target.parentElement;for(e=[t.target,n];n=n.parentElement;)e.push(n);return e.push(document,window),e}function h(t){return t instanceof Element?t:"string"==typeof t?t.split(/>>/g).reduce((t,e,n,i)=>(t=t.querySelector(e),n<i.length-1?t.shadowRoot:t),document):null}function p(t,e=(t=>t)){function n(n){const i=[.001,.01,.1][+(n.shiftKey||2*n.ctrlKey)]*(0>n.deltaY?1:-1);let r=0,o=t.selectionStart;t.value=t.value.replace(/[\d.]+/g,(t,n)=>n<=o&&n+t.length>=o?(o=n,e(+t,i,r)):(r++,t)),t.focus(),t.setSelectionRange(o,o),n.preventDefault(),t.dispatchEvent(new Event("input"))}k(t,"focus",()=>k(window,"wheel",n,{passive:!1})),k(t,"blur",()=>A(window,"wheel",n))}function f(t,e,n){e/=100,n/=100;const i=O(t=t/360*6),r=t-i,o=n*(1-e),s=n*(1-r*e),a=n*(1-(1-r)*e),c=i%6;return[255*[n,s,o,o,a,n][c],255*[a,n,n,s,o,o][c],255*[o,o,a,n,n,s][c]]}function d(t,e,n){const i=(2-(e/=100))*(n/=100)/2;return 0!=i&&(e=1==i?0:.5>i?e*n/(2*i):e*n/(2-2*i)),[t,100*e,100*i]}function v(t,e,n){let i,r,o;const s=E(t/=255,e/=255,n/=255),a=P(t,e,n),c=a-s;if(0==c)i=r=0;else{r=c/a;const o=((a-t)/6+c/2)/c,s=((a-e)/6+c/2)/c,u=((a-n)/6+c/2)/c;t===a?i=u-s:e===a?i=1/3+o-u:n===a&&(i=2/3+s-o),0>i?i+=1:1<i&&(i-=1)}return[360*i,100*r,100*(o=a)]}function g(t,e,n,i){return e/=100,n/=100,[...v(255*(1-E(1,(t/=100)*(1-(i/=100))+i)),255*(1-E(1,e*(1-i)+i)),255*(1-E(1,n*(1-i)+i)))]}function y(t,e,n){return e/=100,[t,2*(e*=.5>(n/=100)?n:1-n)/(n+e)*100,100*(n+e)]}function m(t){return v(...t.match(/.{2}/g).map(t=>parseInt(t,16)))}function b(t=0,e=0,n=0,i=1){const r=(t,e)=>(n=-1)=>e(~n?t.map(t=>+t.toFixed(n)):t),o={h:t,s:e,v:n,a:i,toHSVA(){const t=[o.h,o.s,o.v,o.a];return t.toString=r(t,t=>"hsva(".concat(t[0],", ").concat(t[1],"%, ").concat(t[2],"%, ").concat(o.a,")")),t},toHSLA(){const t=[...d(o.h,o.s,o.v),o.a];return t.toString=r(t,t=>"hsla(".concat(t[0],", ").concat(t[1],"%, ").concat(t[2],"%, ").concat(o.a,")")),t},toRGBA(){const t=[...f(o.h,o.s,o.v),o.a];return t.toString=r(t,t=>"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(o.a,")")),t},toCMYK(){const t=function(t,e,n){const i=f(t,e,n),r=i[0]/255,o=i[1]/255,s=i[2]/255;let a,c,u,l;return[100*(c=1===(a=E(1-r,1-o,1-s))?0:(1-r-a)/(1-a)),100*(u=1===a?0:(1-o-a)/(1-a)),100*(l=1===a?0:(1-s-a)/(1-a)),100*a]}(o.h,o.s,o.v);return t.toString=r(t,t=>"cmyk(".concat(t[0],"%, ").concat(t[1],"%, ").concat(t[2],"%, ").concat(t[3],"%)")),t},toHEXA(){const t=function(t,e,n){return f(t,e,n).map(t=>Y(t).toString(16).padStart(2,"0"))}(o.h,o.s,o.v),e=1<=o.a?"":(+(255*o.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return e&&t.push(e),t.toString=()=>"#".concat(t.join("").toUpperCase()),t},clone:()=>b(o.h,o.s,o.v,o.a)};return o}function _(t){const e={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},t),_keyboard(t){const{type:i,key:r}=t;if(document.activeElement===n.wrapper){const{lock:n}=e.options,o="ArrowUp"===r,s="ArrowRight"===r,a="ArrowDown"===r,c="ArrowLeft"===r;if("keydown"===i&&(o||s||a||c)){let t=0,i=0;"v"===n?t=o||s?1:-1:"h"===n?t=o||s?-1:1:(i=o?-1:a?1:0,t=c?-1:s?1:0),e.update(S(e.cache.x+.01*t),S(e.cache.y+.01*i))}else r.startsWith("Arrow")&&(e.options.onstop(),t.preventDefault())}},_tapstart(t){k(document,["mouseup","touchend","touchcancel"],e._tapstop),k(document,["mousemove","touchmove"],e._tapmove),t.preventDefault(),e._tapmove(t)},_tapmove(t){const{options:{lock:i},cache:r}=e,{element:o,wrapper:s}=n,a=s.getBoundingClientRect();let c=0,u=0;if(t){const e=t&&t.touches&&t.touches[0];c=t?(e||t).clientX:0,u=t?(e||t).clientY:0,c<a.left?c=a.left:c>a.left+a.width&&(c=a.left+a.width),u<a.top?u=a.top:u>a.top+a.height&&(u=a.top+a.height),c-=a.left,u-=a.top}else r&&(c=r.x*a.width,u=r.y*a.height);"h"!==i&&(o.style.left="calc(".concat(c/a.width*100,"% - ").concat(o.offsetWidth/2,"px)")),"v"!==i&&(o.style.top="calc(".concat(u/a.height*100,"% - ").concat(o.offsetHeight/2,"px)")),e.cache={x:c/a.width,y:u/a.height};const l=S(c/s.offsetWidth),h=S(u/s.offsetHeight);return"v"===i?n.onchange(l):"h"===i?n.onchange(h):n.onchange(l,h)},_tapstop(){e.options.onstop(),A(document,["mouseup","touchend","touchcancel"],e._tapstop),A(document,["mousemove","touchmove"],e._tapmove)},trigger(){e._tapmove()},update(t=0,n=0){const{left:i,top:r,width:o,height:s}=e.options.wrapper.getBoundingClientRect();"h"===e.options.lock&&(n=t),e._tapmove({clientX:i+o*t,clientY:r+s*n})},destroy(){const{options:t,_tapstart:n}=e;A([t.wrapper,t.element],"mousedown",n),A([t.wrapper,t.element],"touchstart",n,{passive:!1})}},{options:n,_tapstart:i,_keyboard:r}=e;return k([n.wrapper,n.element],"mousedown",i),k([n.wrapper,n.element],"touchstart",i,{passive:!1}),k(document,["keydown","keyup"],r),e}function w(t={}){t=Object.assign({onchange:()=>0,className:"",elements:[]},t);const e=k(t.elements,"click",e=>{t.elements.forEach(n=>n.classList[e.target===n?"add":"remove"](t.className)),t.onchange(e)});return{destroy:()=>A(...e)}}function D({el:t,reference:e,padding:n=8}){const i={start:"sme",middle:"mse",end:"ems"},r={top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},o=((t={})=>(e,n=t[e])=>{if(n)return n;const[i,r="middle"]=e.split("-");return t[e]={position:i,variant:r,isVertical:"top"===i||"bottom"===i}})();return{update(s){function a(e,n,i){const r="top"===i,o=r?p.height:p.width,s=window[r?"innerHeight":"innerWidth"];for(const r of e){const e=n[r],a=v[i]="".concat(e,"px");if(0<e&&e+o<s)return t.style[i]=a,!0}return!1}const{position:c,variant:u,isVertical:l}=o(s),h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),f=t=>t?{t:h.top-p.height-n,b:h.bottom+n}:{r:h.right+n,l:h.left-p.width-n},d=t=>t?{s:h.left+h.width-p.width,m:-p.width/2+(h.left+h.width/2),e:h.left}:{s:h.bottom-p.height,m:h.bottom-h.height/2-p.height/2,e:h.bottom-h.height},v={};for(const t of[l,!l]){const e=a(r[c],f(t),t?"top":"left"),n=a(i[u],d(t),t?"left":"top");if(e&&n)return}t.style.left=v.left,t.style.top=v.top}}}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e);var C={};n.r(C),n.d(C,"on",(function(){return k})),n.d(C,"off",(function(){return A})),n.d(C,"createElementFromString",(function(){return a})),n.d(C,"removeAttribute",(function(){return c})),n.d(C,"createFromTemplate",(function(){return u})),n.d(C,"eventPath",(function(){return l})),n.d(C,"resolveElement",(function(){return h})),n.d(C,"adjustableInputNumbers",(function(){return p}));const k=s.bind(null,"addEventListener"),A=s.bind(null,"removeEventListener"),{min:E,max:P,floor:O,round:Y}=Math,S=t=>Math.max(Math.min(t,1),0);class X{constructor(t){x(this,"_initializingActive",!0),x(this,"_recalc",!0),x(this,"_color",b()),x(this,"_lastColor",b()),x(this,"_swatchColors",[]),x(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]}),this.options=t=Object.assign({appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},strings:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"},t);const{swatches:e,components:n,theme:i,sliders:r,lockOpacity:o,padding:s}=t;["nano","monolith"].includes(i)&&!r&&(t.sliders="h"),n.interaction||(n.interaction={});const{preview:a,opacity:c,hue:u,palette:l}=n;n.opacity=!o&&c,n.palette=l||a||c||u,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),e&&e.length&&e.forEach(t=>this.addSwatch(t));const{button:h,app:p}=this._root;this._nanopop=D({reference:h,padding:s,el:p}),h.setAttribute("role","button"),h.setAttribute("aria-label","toggle color picker dialog");const f=this;requestAnimationFrame((function e(){return p.offsetWidth||p.parentElement===t.container?(f.setColor(t.default),f._rePositioningPicker(),t.defaultRepresentation&&(f._representation=t.defaultRepresentation,f.setColorRepresentation(f._representation)),t.showAlways&&f.show(),f._initializingActive=!1,void f._emit("init")):requestAnimationFrame(e)}))}_preBuild(){const t=this.options;for(const e of["el","container"])t[e]=h(t[e]);this._root=(({components:t,strings:e,useAsButton:n,inline:i,appClass:r,theme:o,lockOpacity:s})=>{const a=t=>t?"":'style="display:none" hidden',c=u('\n      <div :ref="root" class="pickr">\n\n        '.concat(n?"":'<button type="button" :ref="button" class="pcr-button"></button>','\n\n        <div :ref="app" class="pcr-app ').concat(r||"",'" data-theme="').concat(o,'" ').concat(i?'style="position: unset"':"",' aria-label="color picker dialog" role="window">\n          <div class="pcr-selection" ').concat(a(t.palette),'>\n            <div :obj="preview" class="pcr-color-preview" ').concat(a(t.preview),'>\n              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="use previous color"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="color selection area" role="widget"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ').concat(a(t.hue),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="hue selection slider" role="widget"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ').concat(a(t.opacity),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="opacity selection slider" role="widget"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ').concat(t.palette?"":" pcr-last",'" :ref="swatches"></div> \n\n          <div :obj="interaction" class="pcr-interaction" ').concat(a(Object.keys(t.interaction).length),'>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ').concat(a(t.interaction.input),'>\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="').concat(s?"HEX":"HEXA",'" type="button" ').concat(a(t.interaction.hex),'>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="').concat(s?"RGB":"RGBA",'" type="button" ').concat(a(t.interaction.rgba),'>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="').concat(s?"HSL":"HSLA",'" type="button" ').concat(a(t.interaction.hsla),'>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="').concat(s?"HSV":"HSVA",'" type="button" ').concat(a(t.interaction.hsva),'>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ').concat(a(t.interaction.cmyk),'>\n\n            <input :ref="save" class="pcr-save" value="').concat(e.save||"Save",'" type="button" ').concat(a(t.interaction.save),' aria-label="save and exit">\n            <input :ref="cancel" class="pcr-cancel" value="').concat(e.cancel||"Cancel",'" type="button" ').concat(a(t.interaction.cancel),' aria-label="cancel and exit">\n            <input :ref="clear" class="pcr-clear" value="').concat(e.clear||"Clear",'" type="button" ').concat(a(t.interaction.clear),' aria-label="clear and exit">\n          </div>\n        </div>\n      </div>\n    ')),l=c.interaction;return l.options.find(t=>!t.hidden&&!t.classList.add("active")),l.type=()=>l.options.find(t=>t.classList.contains("active")),c})(t),t.useAsButton&&(this._root.button=t.el),t.container.appendChild(this._root.root)}_finalBuild(){const t=this.options,e=this._root;if(t.container.removeChild(e.root),t.inline){const n=t.el.parentElement;t.el.nextSibling?n.insertBefore(e.app,t.el.nextSibling):n.appendChild(e.app)}else t.container.appendChild(e.app);t.useAsButton?t.inline&&t.el.remove():t.el.parentNode.replaceChild(e.root,t.el),t.disabled&&this.disable(),t.comparison||(e.button.style.transition="none",t.useAsButton||(e.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const t=this,e=this.options.components,n=(t.options.sliders||"v").repeat(2),[i,r]=n.match(/^[vh]+$/g)?n:[],o=()=>this._color||(this._color=this._lastColor.clone()),s={palette:_({element:t._root.palette.picker,wrapper:t._root.palette.palette,onstop:()=>t._emit("changestop",t),onchange(n,i){if(e.palette){const e=o(),{_root:r,options:s}=t;t._recalc&&(e.s=100*n,e.v=100-100*i,0>e.v&&(e.v=0),t._updateOutput());const a=e.toRGBA().toString(0);this.element.style.background=a,this.wrapper.style.background="\n                        linear-gradient(to top, rgba(0, 0, 0, ".concat(e.a,"), transparent),\n                        linear-gradient(to left, hsla(").concat(e.h,", 100%, 50%, ").concat(e.a,"), rgba(255, 255, 255, ").concat(e.a,"))\n                    "),s.comparison?s.useAsButton||t._lastColor||(r.preview.lastColor.style.color=a):r.button.style.color=a;const c=e.toHEXA().toString();for(const e of t._swatchColors){const{el:t,color:n}=e;t.classList[c===n.toHEXA().toString()?"add":"remove"]("pcr-active")}r.preview.currentColor.style.color=a,t.options.comparison||r.button.classList.remove("clear")}}}),hue:_({lock:"v"===r?"h":"v",element:t._root.hue.picker,wrapper:t._root.hue.slider,onstop:()=>t._emit("changestop",t),onchange(n){if(e.hue&&e.palette){const e=o();t._recalc&&(e.h=360*n),this.element.style.backgroundColor="hsl(".concat(e.h,", 100%, 50%)"),s.palette.trigger()}}}),opacity:_({lock:"v"===i?"h":"v",element:t._root.opacity.picker,wrapper:t._root.opacity.slider,onstop:()=>t._emit("changestop",t),onchange(n){if(e.opacity&&e.palette){const e=o();t._recalc&&(e.a=Math.round(100*n)/100),this.element.style.background="rgba(0, 0, 0, ".concat(e.a,")"),s.palette.trigger()}}}),selectable:w({elements:t._root.interaction.options,className:"active",onchange(e){t._representation=e.target.getAttribute("data-type").toUpperCase(),t._recalc&&t._updateOutput()}})};this._components=s}_bindEvents(){const{_root:t,options:e}=this,n=[k(t.interaction.clear,"click",()=>this._clearColor()),k([t.interaction.cancel,t.preview.lastColor],"click",()=>{this._emit("cancel",this),this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0)}),k(t.interaction.save,"click",()=>{this.applyColor()||e.showAlways||this.hide()}),k(t.interaction.result,["keyup","input"],t=>{this.setColor(t.target.value,!0)&&!this._initializingActive&&this._emit("change",this._color),t.stopImmediatePropagation()}),k(t.interaction.result,["focus","blur"],t=>{this._recalc="blur"===t.type,this._recalc&&this._updateOutput()}),k([t.palette.palette,t.palette.picker,t.hue.slider,t.hue.picker,t.opacity.slider,t.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0)];if(!e.showAlways){const i=e.closeWithKey;n.push(k(t.button,"click",()=>this.isOpen()?this.hide():this.show()),k(document,"keyup",t=>this.isOpen()&&(t.key===i||t.code===i)&&this.hide()),k(document,["touchstart","mousedown"],e=>{this.isOpen()&&!l(e).some(e=>e===t.app||e===t.button)&&this.hide()},{capture:!0}))}if(e.adjustableNumbers){const e={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};p(t.interaction.result,(t,n,i)=>{const r=e[this.getColorRepresentation().toLowerCase()];if(r){const e=r[i],o=t+(100<=e?1e3*n:n);return 0>=o?0:+(o<e?o:e).toPrecision(3)}return t})}if(e.autoReposition&&!e.inline){let t=null;const i=this;n.push(k(window,["scroll","resize"],()=>{i.isOpen()&&(e.closeOnScroll&&i.hide(),null===t?(t=setTimeout(()=>t=null,100),requestAnimationFrame((function e(){i._rePositioningPicker(),null!==t&&requestAnimationFrame(e)}))):(clearTimeout(t),t=setTimeout(()=>t=null,100)))},{capture:!0}))}this._eventBindings=n}_rePositioningPicker(){const{options:t}=this;if(!t.inline){const{app:e}=this._root;matchMedia("(max-width: 576px)").matches?Object.assign(e.style,{margin:"auto",height:"".concat(e.getBoundingClientRect().height,"px"),top:0,bottom:0,left:0,right:0}):(Object.assign(e.style,{margin:null,right:null,top:null,bottom:null,left:null,height:null}),this._nanopop.update(t.position))}}_updateOutput(){const{_root:t,_color:e,options:n}=this;if(t.interaction.type()){const i="to".concat(t.interaction.type().getAttribute("data-type"));t.interaction.result.value="function"==typeof e[i]?e[i]().toString(n.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",e)}_clearColor(t=!1){const{_root:e,options:n}=this;n.useAsButton||(e.button.style.color="rgba(0, 0, 0, 0.15)"),e.button.classList.add("clear"),n.showAlways||this.hide(),this._lastColor=null,this._initializingActive||t||(this._emit("save",null),this._emit("clear",this))}_parseLocalColor(t){const{values:e,type:n,a:i}=function(t){t=t.match(/^[a-zA-Z]+$/)?function(t){if("black"===t.toLowerCase())return"#000000";const e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,"#000000"===e.fillStyle?null:e.fillStyle}(t):t;const e={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},n=t=>t.map(t=>/^(|\d+)\.\d+|\d+$/.test(t)?+t:void 0);let i;t:for(const r in e){if(!(i=e[r].exec(t)))continue;const o=t=>!!i[2]==("number"==typeof t);switch(r){case"cmyk":{const[,t,e,o,s]=n(i);if(100<t||100<e||100<o||100<s)break t;return{values:g(t,e,o,s),type:r}}case"rgba":{const[,,,t,e,s,a]=n(i);if(255<t||255<e||255<s||0>a||1<a||!o(a))break t;return{values:[...v(t,e,s),a],a:a,type:r}}case"hexa":{let[,t]=i;4!==t.length&&3!==t.length||(t=t.split("").map(t=>t+t).join(""));const e=t.substring(0,6);let n=t.substring(6);return n=n?parseInt(n,16)/255:void 0,{values:[...m(e),n],a:n,type:r}}case"hsla":{const[,,,t,e,s,a]=n(i);if(360<t||100<e||100<s||0>a||1<a||!o(a))break t;return{values:[...y(t,e,s),a],a:a,type:r}}case"hsva":{const[,,,t,e,s,a]=n(i);if(360<t||100<e||100<s||0>a||1<a||!o(a))break t;return{values:[t,e,s,a],a:a,type:r}}}}return{values:null,type:null}}(t),{lockOpacity:r}=this.options;return e&&3===e.length&&(e[3]=void 0),{values:!e||r&&void 0!==i&&1!==i?null:e,type:n}}_emit(t,...e){this._eventListener[t].forEach(t=>t(...e,this))}on(t,e){return"function"==typeof e&&"string"==typeof t&&t in this._eventListener&&this._eventListener[t].push(e),this}off(t,e){const n=this._eventListener[t];if(n){const t=n.indexOf(e);~t&&n.splice(t,1)}return this}addSwatch(t){const{values:e}=this._parseLocalColor(t);if(e){const{_swatchColors:t,_root:n}=this,i=b(...e),r=a('<button type="button" style="color: '.concat(i.toRGBA().toString(0),'" aria-label="color swatch"/>'));return n.swatches.appendChild(r),t.push({el:r,color:i}),this._eventBindings.push(k(r,"click",()=>{this.setHSVA(...i.toHSVA(),!0),this._emit("swatchselect",i),this._emit("change",i)})),!0}return!1}removeSwatch(t){const e=this._swatchColors[t];if(e){const{el:n}=e;return this._root.swatches.removeChild(n),this._swatchColors.splice(t,1),!0}return!1}applyColor(t=!1){const{preview:e,button:n}=this._root,i=this._color.toRGBA().toString();e.lastColor.style.color=i,this.options.useAsButton||(n.style.color=i),n.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||t||this._emit("save",this._color)}destroy(){this._eventBindings.forEach(t=>A(...t)),Object.keys(this._components).forEach(t=>this._components[t].destroy())}destroyAndRemove(){this.destroy();const{root:t,app:e}=this._root;t.parentElement&&t.parentElement.removeChild(t),e.parentElement.removeChild(e),Object.keys(this).forEach(t=>this[t]=null)}hide(){return this._root.app.classList.remove("visible"),this._emit("hide",this),this}show(){return this.options.disabled||(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this)),this}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(t=360,e=0,n=0,i=1,r=!1){const o=this._recalc;if(this._recalc=!1,0>t||360<t||0>e||100<e||0>n||100<n||0>i||1<i)return!1;this._color=b(t,e,n,i);const{hue:s,opacity:a,palette:c}=this._components;return s.update(t/360),a.update(i),c.update(e/100,1-n/100),r||this.applyColor(),o&&this._updateOutput(),this._recalc=o,!0}setColor(t,e=!1){if(null===t)return this._clearColor(e),!0;const{values:n,type:i}=this._parseLocalColor(t);if(n){const t=i.toUpperCase(),{options:r}=this._root.interaction,o=r.find(e=>e.getAttribute("data-type")===t);if(o&&!o.hidden)for(const t of r)t.classList[t===o?"add":"remove"]("active");return this.setColorRepresentation(t),this.setHSVA(...n,e)}return!1}setColorRepresentation(t){return t=t.toUpperCase(),!!this._root.interaction.options.find(e=>e.getAttribute("data-type").startsWith(t)&&!e.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}X.utils=C,X.libs={HSVaColor:b,Moveable:_,Nanopop:D,Selectable:w},X.create=t=>new X(t),X.version="1.4.2",e.default=X}]).default},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.imgDiv=e.children[0].children[1],n.imgNameDiv=e.children[0].children[2],n.maskIsSet=!1,n.alphaMaskContainer=document.getElementById("alphaMaskContainer"),n.currentAlphaMaskInfoDiv=n.element.nextElementSibling,n.value=null,n.interactions(),n.loadAlphaMasks(),n}return i(e,t),e.prototype.loadAlphaMasks=function(t){var e=this;this.alphaMaskContainer.innerHTML="";var n=t||"";fetch("/loadAlphaMasks",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder:n})}).then((function(t){return t.json()})).then((function(t){""!==n&&t.unshift("..");for(var i=0,r=t;i<r.length;i++){var o=r[i],s=n+"/"+o;s.includes("/..")&&(s=s.replace(/(\/\w+\/\.\.)/g,""));var a=document.createElement("div");a.className="alphaMask";var c=document.createElement("img");c.alt=o,c.title=o;var u=document.createElement("p");u.textContent=o,o.includes(".png")?(c.src=s,a.onclick=e.alphaMaskChanged.bind(e,s)):(".."===o?(c.className+="back",c.src="img/Back.png"):c.src="img/folder.png",a.onclick=e.loadAlphaMasks.bind(e,s)),a.appendChild(c),a.appendChild(u),e.alphaMaskContainer.appendChild(a)}}))},e.prototype.alphaMaskChanged=function(t){this.value=t,this.imgDiv.src=t,this.imgDiv.onload=this.updateMaskInfo.bind(this,t),this.maskIsSet=!0,this.valueChange(!0)},e.prototype.updateMaskInfo=function(t){var e;if(t){var n=!!t.match(/(\d+)x(\d+)/g),i=t.match(/(\d+)x(\d+)/g);n&&i[0].split("x").map((function(t){return parseInt(t)}));e=[t,this.imgDiv.naturalWidth+"px by "+this.imgDiv.naturalHeight+"px",n?"SpriteSheet":"",n?i[0].replace("x"," by "):""]}else e=["No Alpha Selected"];this.currentAlphaMaskInfoDiv.innerHTML="";for(var r=0,o=e;r<o.length;r++){var s=o[r],a=document.createElement("p");a.textContent=s,this.currentAlphaMaskInfoDiv.appendChild(a)}},e.prototype.interactions=function(){var t=this;this.element.onmouseenter=function(){t.maskIsSet&&(t.imgNameDiv.textContent="Clear Mask?")},this.element.onmouseleave=function(){t.imgNameDiv.textContent="Current Alpha"},this.element.onclick=function(){t.maskIsSet&&(t.value=null,t.imgDiv.src="img/Empty.png",t.imgDiv.onload=t.updateMaskInfo.bind(t,null),t.imgNameDiv.textContent="Current Alpha",t.maskIsSet=!1,t.valueChange(!0))}},e.prototype.setUI=function(t){"multiple"===t?(this.value=null,this.imgDiv.src="img/Empty.png",this.imgDiv.onload=this.updateMaskInfo.bind(this,"multiple"),this.imgNameDiv.textContent="Current Alpha",this.maskIsSet=!0):null===t?(this.value=null,this.imgDiv.src="img/Empty.png",this.imgDiv.onload=this.updateMaskInfo.bind(this,null),this.imgNameDiv.textContent="Current Alpha",this.maskIsSet=!1):(this.value=t,this.imgDiv.src=t,this.imgDiv.onload=this.updateMaskInfo.bind(this,t),this.maskIsSet=!0),this.valueChange(!1)},e.prototype.setValue=function(t){this.setUI(t),this.valueChange(!0)},e.prototype.valueChange=function(t){t&&this.events.onchange&&this.events.onchange()},e}(n(0).default);e.default=r}]);